<div id="line_item_<%= line_item.id %>" class="cart-item">
  <div class="w-20 h-20 rounded-lg overflow-hidden flex-shrink-0">
    <% if line_item.product.images.attached? %>
      <%= image_tag line_item.product.images.first.variant(resize_to_fill: [80, 80]).processed,
          class: "w-full h-full object-cover" %>
    <% else %>
      <div class="w-full h-full bg-neutral-200 flex items-center justify-center text-neutral-400 text-xs">
        No Image
      </div>
    <% end %>
  </div>
  
  <div class="flex-1 min-w-0">
    <h3 class="font-semibold text-neutral-900 truncate"><%= line_item.product.name %></h3>
    <p class="text-sm text-neutral-600"><%= line_item.product.category.name %></p>
    <p class="text-lg font-bold text-neutral-900 mt-1">
      <%= number_to_currency(line_item.unit_price_cents / 100.0, unit: 'R') %>
    </p>
  </div>
  
  <div class="flex items-center space-x-3">
    <%= form_with model: @cart, url: update_item_cart_path(id: line_item.id), method: :patch, local: true, class: "flex items-center space-x-2" do |f| %>
      <%= f.number_field :quantity, value: line_item.quantity, min: 1, max: 99, 
          class: "quantity-input", 
          onchange: "this.form.submit()" %>
    <% end %>
    
    <%= button_to remove_item_cart_path(id: line_item.id), method: :delete, 
        class: "text-red-500 hover:text-red-700 p-1",
        confirm: "Remove this item from cart?" do %>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
    <% end %>
  </div>
  
  <div class="text-right">
    <p class="font-bold text-lg text-neutral-900">
      <%= number_to_currency((line_item.quantity * line_item.unit_price_cents) / 100.0, unit: 'R') %>
    </p>
  </div>
</div>